uses SysUtils,Classes;

const FileName = 'inv.txt';

procedure SaveToFile(s:String);
var sl:TStringList;
begin
    sl := TStringList.Create;
    try
        sl.Add(s);
        sl.SaveToFile( Script.Path + FileName);
    finally
        sl.free;
    end;
end;


function GetInventory(): string; 
var
    i: integer;
begin
    Result := '';
    for i := 0 to Inventory.User.count - 1 do
        Result := format('%s%d,%d;',[Result,Inventory.User.Items(i).id,Inventory.User.Items(i).count]);
end;

var s:string;
begin
    s := GetInventory();
    print(s);
    SaveToFile(s);
end.